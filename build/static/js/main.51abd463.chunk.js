(this.webpackJsonpthephonebook=this.webpackJsonpthephonebook||[]).push([[0],{41:function(e,n,t){"use strict";t.r(n);var c=t(2),r=t(16),o=t.n(r),a=t(7),i=t(3),u=t(0),l=function(e){var n=e.handleClick,t=e.text;return Object(u.jsx)("button",{onClick:n,children:t})},d=function(e){var n=e.persons,t=e.filters,c=e.deletePerson,r=n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}));return Object(u.jsx)("div",{children:r.map((function(e){return Object(u.jsxs)("div",{children:[e.name," ",e.number," ",Object(u.jsx)(l,{handleClick:c(e),text:"delete"})]},e.id)}))})},s=function(e){var n=e.message,t={color:e.messageColor,background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10};return null===n?null:Object(u.jsx)("div",{style:t,children:n})},b=function(e){var n=e.newFilter,t=e.handleFilterChange;return Object(u.jsxs)("div",{children:["filter shown with ",Object(u.jsx)("input",{value:n,onChange:t})]})},h=function(e){return Object(u.jsx)("div",{children:Object(u.jsxs)("form",{onSubmit:e.addPerson,children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:e.newName,onChange:e.handleNameChange})]}),Object(u.jsxs)("div",{children:["number: ",Object(u.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})})},j=t(4),f=t.n(j),m="/api/notes",O={getAll:function(){return f.a.get(m).then((function(e){return e.data}))},create:function(e){return f.a.post(m,e).then((function(e){return e.data}))},update:function(e,n){return f.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))},clean:function(e){return f.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))}},g=function(){var e=Object(c.useState)([]),n=Object(i.a)(e,2),t=n[0],r=n[1],o=Object(c.useState)(""),l=Object(i.a)(o,2),j=l[0],f=l[1],m=Object(c.useState)(""),g=Object(i.a)(m,2),p=g[0],x=g[1],v=Object(c.useState)(""),w=Object(i.a)(v,2),C=w[0],k=w[1],N=Object(c.useState)(null),S=Object(i.a)(N,2),y=S[0],P=S[1],A=Object(c.useState)("red"),F=Object(i.a)(A,2),L=F[0],T=F[1];Object(c.useEffect)((function(){O.getAll().then((function(e){r(e)})).catch((function(e){return console.log("initialization failed")}))}),[]);return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(s,{message:y,messageColor:L}),Object(u.jsx)(b,{newFilter:C,handleFilterChange:function(e){k(e.target.value)}}),Object(u.jsx)("h3",{children:"Add a new"}),Object(u.jsx)(h,{addPerson:function(e){e.preventDefault();var n=t.filter((function(e){return e.name.toLowerCase()===j.toLowerCase()}));0!==n.length?window.confirm("".concat(j," is already added to phonebook,\n        replace the old number with a new one?"))&&O.update(n[0].id,Object(a.a)(Object(a.a)({},n[0]),{},{number:p})).then((function(e){r(t.map((function(n){return n.id!==e.id?n:e}))),f(""),x(""),setTimeout((function(){P(null)}),5e3)})).catch((function(e){T("red"),P("Information of ".concat(j," has been removed from server")),f(""),x(""),setTimeout((function(){P(null)}),5e3)})):O.create({name:j,number:p}).then((function(e){r(t.concat(e)),T("green"),P("Added ".concat(j)),f(""),x(""),setTimeout((function(){P(null)}),3e3)})).catch((function(e){return console.log("adding person failed")}))},newName:j,handleNameChange:function(e){f(e.target.value)},newNumber:p,handleNumberChange:function(e){x(e.target.value)}}),Object(u.jsx)("h3",{children:"Numbers"}),Object(u.jsx)(d,{persons:t,filters:C,deletePerson:function(e){return function(){window.confirm("Delete ".concat(e.name," ?"))&&O.clean(e.id).then((function(n){T("green"),P("Deleted ".concat(e.name)),r(t.filter((function(n){return n.id!==e.id}))),setTimeout((function(){P(null)}),3e3)})).catch((function(e){return console.log("deleting person failed")}))}}})]})};o.a.render(Object(u.jsx)(g,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.51abd463.chunk.js.map